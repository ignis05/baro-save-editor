var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__spreadValues=(e,t)=>{for(var o in t||(t={}))__hasOwnProp.call(t,o)&&__defNormalProp(e,o,t[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(t))__propIsEnum.call(t,o)&&__defNormalProp(e,o,t[o]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t));import{H as toFinite_1,_ as _Symbol,I as isSymbol_1,J as _root,K as toNumber_1,i as installAssets,f as VBtn,L as useStore,M as computed,N as ref,O as watch,o as openBlock,n as createBlock,w as withCtx,b as createVNode,P as createBaseVNode,p as normalizeClass,d as createTextVNode,t as toDisplayString,Q as pushScopeId,R as popScopeId,r as resolveComponent,S as mapGetters,y as lib,T as VIcon,l as VDialog,a as createElementBlock,F as Fragment,m as renderList,U as createCommentVNode,W as withDirectives,X as vModelText,Y as vModelSelect,Z as withModifiers}from"./vendor.32102158.js";import{i as isArray_1,V as VTextField,_ as _baseClone,a as VDivider,b as _sfc_main$6}from"./FileDropper.7ddc0cda.js";import{V as VCardTitle,a as VCardHeader,b as VCard,c as VCardText,d as VCardActions,e as VCol,f as VRow,g as VContainer}from"./VRow.e59343f3.js";import{V as VSheet}from"./VSheet.af283e94.js";import{d as desanitized_js2xml,g as gsHeader,C as CompressSub,a as CompressSave}from"./index.77fca062.js";import{V as VSpacer,a as VTooltip}from"./VTooltip.5b638740.js";var toFinite=toFinite_1;function toInteger$1(e){var t=toFinite(e),o=t%1;return t==t?o?t-o:t:0}var toInteger_1=toInteger$1;function arrayMap$1(e,t){for(var o=-1,a=null==e?0:e.length,n=Array(a);++o<a;)n[o]=t(e[o],o,e);return n}var _arrayMap=arrayMap$1,Symbol$1=_Symbol,arrayMap=_arrayMap,isArray=isArray_1,isSymbol=isSymbol_1,INFINITY=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString$1(e){if("string"==typeof e)return e;if(isArray(e))return arrayMap(e,baseToString$1)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$2(e){return null==e?"":baseToString(e)}var toString_1=toString$2,root=_root,toInteger=toInteger_1,toNumber$1=toNumber_1,toString$1=toString_1,nativeIsFinite=root.isFinite,nativeMin=Math.min;function createRound$1(e){var t=Math[e];return function(e,o){if(e=toNumber$1(e),(o=null==o?0:nativeMin(toInteger(o),292))&&nativeIsFinite(e)){var a=(toString$1(e)+"e").split("e"),n=t(a[0]+"e"+(+a[1]+o));return+((a=(toString$1(n)+"e").split("e"))[0]+"e"+(+a[1]-o))}return t(e)}}var _createRound=createRound$1,createRound=_createRound,round=createRound("round"),round_1=round;function baseClamp$1(e,t,o){return e==e&&(void 0!==o&&(e=e<=o?e:o),void 0!==t&&(e=e>=t?e:t)),e}var _baseClamp=baseClamp$1,baseClamp=_baseClamp,toNumber=toNumber_1;function clamp(e,t,o){return void 0===o&&(o=t,t=void 0),void 0!==o&&(o=(o=toNumber(o))==o?o:0),void 0!==t&&(t=(t=toNumber(t))==t?t:0),baseClamp(toNumber(e),t,o)}var clamp_1=clamp,CampaignSettings_vue_vue_type_style_index_0_scoped_true_lang="\n.iconButton[data-v-9c921b62] {\n  cursor: pointer;\n}\ninput[data-v-9c921b62] {\n  border: 1px solid white;\n  width: 100%;\n}\n.toolTitle[data-v-9c921b62] {\n  font-weight: normal;\n  font-size: 1.1em;\n  align-self: center;\n  margin-left: 12px;\n}\n.toolContent[data-v-9c921b62]:not(:last-child) {\n  margin-bottom: 16px;\n}\n.textArea[data-v-9c921b62] {\n  background: white;\n  color: black;\n}\n";const _sfc_main$5={setup:()=>({maxmissions:maxmissionsSetup(),radiation:radiationSetup(),difficulty:difficultySetup()})};function maxmissionsSetup(){const e=useStore(),t=computed((()=>e.getters.campaignSettings.attributes.MaxMissionCount)),o=ref(t.value),a=computed((()=>o.value!==t.value));function n(){parseInt(o.value)>=0?(e.getters.campaignSettings.attributes.MaxMissionCount=o.value,e.dispatch("showAlert",{type:"success",text:`Set max missions to "${o.value}".`})):e.dispatch("showAlert",{type:"info",text:"Value must be a positive number."})}return watch(t,(e=>{o.value=e})),{inputVal:o,isDifferent:a,click:n,keyUp:function(e){"Enter"===e.key&&n()}}}function radiationSetup(){const e=useStore(),t=computed((()=>"True"==e.getters.campaignSettings.attributes.RadiationEnabled));return{isEnabled:t,toggle:function(){let o=e.getters.campaign.elements.find((e=>"map"===e.name)),a=o.elements.find((e=>"Radiation"===e.name));if(t.value){e.getters.campaignSettings.attributes.RadiationEnabled="False",a.attributes.Enabled="False",a.attributes.Amount="-200";for(let e of o.elements.filter((e=>"location"==e.name)))e.attributes.turnsinradiation="0"}else e.getters.campaignSettings.attributes.RadiationEnabled="True",a.attributes.Enabled="True"}}}function difficultySetup(){const store=useStore(),avgDiff=computed((()=>{let e=store.getters.campaign.elements.find((e=>"map"==e.name)),t=0,o=0;for(let a of e.elements)if("connection"==a.name&&(o+=parseFloat(a.attributes.difficulty),t++),"connection"==a.name||"location"==a.name){if(!location.elements)continue;for(let e of location.elements)"Level"===e.name&&(o+=parseFloat(e.attributes.difficulty),t++)}return round_1(o/t,2)})),inputVal=ref("current * 2");function updateVal(element){var _a;let current=parseFloat(null==(_a=element.attributes)?void 0:_a.difficulty),newDiff;if(isNaN(current))return!1;try{newDiff=eval(inputVal.value)}catch(err){return!1}return!isNaN(newDiff)&&(element.attributes.difficulty=clamp_1(newDiff,0,100).toString(),!0)}function click(){let current=10,newDiff;if(isNaN(current))return;try{newDiff=eval(inputVal.value)}catch(err){return store.dispatch("showAlert",{type:"error",text:`Invalid input: "${err}".`})}if(isNaN(newDiff))return store.dispatch("showAlert",{type:"error",text:"Invalid input: resulting value is NaN."});let updatedCount=0;for(let e of store.getters.campaign.elements.find((e=>"map"==e.name)).elements)if("connection"==e.name&&updateVal(e)&&updatedCount++,"connection"==e.name||"location"==e.name)for(let t of e.elements)"Level"===t.name&&updateVal(t)&&updatedCount++;store.dispatch("showAlert",{type:"success",text:`Updated difficulty in ${updatedCount} levels.`})}function keyUp(e){"Enter"===e.key&&click()}return{inputVal:inputVal,avgDiff:avgDiff,click:click,keyUp:keyUp}}const _withScopeId$2=e=>(pushScopeId("data-v-9c921b62"),e=e(),popScopeId(),e),_hoisted_1$4=createTextVNode(" Campaign Settings "),_hoisted_2$4={class:"toolContent d-flex flex-row justify-space-between align-center px-2"},_hoisted_3$4=createTextVNode(" SET "),_hoisted_4$4=_withScopeId$2((()=>createBaseVNode("h3",{class:"toolTitle"},"Radiation",-1))),_hoisted_5$4={class:"toolContent d-flex flex-row justify-space-between px-2"},_hoisted_6$4=_withScopeId$2((()=>createBaseVNode("h3",{class:"toolTitle"},"Difficulty",-1))),_hoisted_7$2={class:"toolContent d-flex flex-column px-2"},_hoisted_8$2={class:"mb-2"},_hoisted_9$2=createTextVNode(" Current average difficuly: "),_hoisted_10$2={class:"text-secondary"},_hoisted_11$2={class:"d-flex flex-row justify-space-between align-center"},_hoisted_12$2=createTextVNode(" SET ");function _sfc_render$5(e,t,o,a,n,r){const l=resolveComponent("v-card-title"),i=resolveComponent("v-card-header"),s=resolveComponent("v-text-field"),c=resolveComponent("v-btn"),d=resolveComponent("v-sheet"),u=resolveComponent("v-card");return openBlock(),createBlock(u,{elevation:"1",class:"pb-2"},{default:withCtx((()=>[createVNode(i,{class:"flex-column align-center"},{default:withCtx((()=>[createVNode(l,null,{default:withCtx((()=>[_hoisted_1$4])),_:1})])),_:1}),createVNode(d,{class:"d-flex flex-column align-center"},{default:withCtx((()=>[createBaseVNode("div",_hoisted_2$4,[createVNode(s,{"hide-details":"true",density:"comfortable",label:"Max Missions",variant:"outlined",style:{color:"white","min-width":"140px"},modelValue:a.maxmissions.inputVal.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.maxmissions.inputVal.value=e),onKeyup:a.maxmissions.keyUp,class:normalizeClass(["mr-2 mb-0",{"text-secondary":a.maxmissions.isDifferent.value,"text-white":!a.maxmissions.isDifferent.value}])},null,8,["modelValue","onKeyup","class"]),createVNode(c,{variant:"outlined",disabled:!a.maxmissions.isDifferent.value,onClick:a.maxmissions.click,color:"secondary",class:"py-5"},{default:withCtx((()=>[_hoisted_3$4])),_:1},8,["disabled","onClick"])]),_hoisted_4$4,createBaseVNode("div",_hoisted_5$4,[createVNode(c,{variant:"outlined",disabled:!a.radiation.isEnabled.value,onClick:a.radiation.toggle,color:a.radiation.isEnabled.value?"secondary":"grey"},{default:withCtx((()=>[createTextVNode(toDisplayString(a.radiation.isEnabled.value?"Disable":"Disabled"),1)])),_:1},8,["disabled","onClick","color"]),createVNode(c,{variant:"outlined",disabled:a.radiation.isEnabled.value,onClick:a.radiation.toggle,color:a.radiation.isEnabled.value?"grey":"secondary"},{default:withCtx((()=>[createTextVNode(toDisplayString(a.radiation.isEnabled.value?"Enabled":"Enable"),1)])),_:1},8,["disabled","onClick","color"])]),_hoisted_6$4,createBaseVNode("div",_hoisted_7$2,[createBaseVNode("div",_hoisted_8$2,[_hoisted_9$2,createBaseVNode("span",_hoisted_10$2,toDisplayString(a.difficulty.avgDiff),1)]),createBaseVNode("div",_hoisted_11$2,[createVNode(s,{"hide-details":"true",density:"comfortable",label:"New difficulty",variant:"outlined",style:{color:"white","min-width":"140px"},modelValue:a.difficulty.inputVal.value,"onUpdate:modelValue":t[1]||(t[1]=e=>a.difficulty.inputVal.value=e),onKeyup:a.difficulty.keyUp,class:"mr-2 mb-0 text-white"},null,8,["modelValue","onKeyup"]),createVNode(c,{variant:"outlined",onClick:a.difficulty.click,color:"secondary",class:"py-5"},{default:withCtx((()=>[_hoisted_12$2])),_:1},8,["onClick"])])])])),_:1})])),_:1})}
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}function _objectWithoutProperties(e,t){if(null==e)return{};var o,a,n=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}_sfc_main$5.render=_sfc_render$5,_sfc_main$5.__scopeId="data-v-9c921b62",installAssets(_sfc_main$5,"components",{VCardTitle:VCardTitle,VCardHeader:VCardHeader,VTextField:VTextField,VBtn:VBtn,VSheet:VSheet,VCard:VCard});var version="1.14.0";function userAgent(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(e,t,o){e.addEventListener(t,o,!IE11OrLess&&captureMode)}function off(e,t,o){e.removeEventListener(t,o,!IE11OrLess&&captureMode)}function matches(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(o){return!1}return!1}}function getParentOrHost(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function closest(e,t,o,a){if(e){o=o||document;do{if(null!=t&&(">"===t[0]?e.parentNode===o&&matches(e,t):matches(e,t))||a&&e===o)return e;if(e===o)break}while(e=getParentOrHost(e))}return null}var R_SPACE=/\s+/g,_throttleTimeout;function toggleClass(e,t,o){if(e&&t)if(e.classList)e.classList[o?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(R_SPACE," ").replace(" "+t+" "," ");e.className=(a+(o?" "+t:"")).replace(R_SPACE," ")}}function css(e,t,o){var a=e&&e.style;if(a){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),void 0===t?o:o[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=o+("string"==typeof o?"":"px")}}function matrix(e,t){var o="";if("string"==typeof e)o=e;else do{var a=css(e,"transform");a&&"none"!==a&&(o=a+" "+o)}while(!t&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(o)}function find(e,t,o){if(e){var a=e.getElementsByTagName(t),n=0,r=a.length;if(o)for(;n<r;n++)o(a[n],n);return a}return[]}function getWindowScrollingElement(){var e=document.scrollingElement;return e||document.documentElement}function getRect(e,t,o,a,n){if(e.getBoundingClientRect||e===window){var r,l,i,s,c,d,u;if(e!==window&&e.parentNode&&e!==getWindowScrollingElement()?(l=(r=e.getBoundingClientRect()).top,i=r.left,s=r.bottom,c=r.right,d=r.height,u=r.width):(l=0,i=0,s=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||o)&&e!==window&&(n=n||e.parentNode,!IE11OrLess))do{if(n&&n.getBoundingClientRect&&("none"!==css(n,"transform")||o&&"static"!==css(n,"position"))){var h=n.getBoundingClientRect();l-=h.top+parseInt(css(n,"border-top-width")),i-=h.left+parseInt(css(n,"border-left-width")),s=l+r.height,c=i+r.width;break}}while(n=n.parentNode);if(a&&e!==window){var p=matrix(n||e),f=p&&p.a,m=p&&p.d;p&&(s=(l/=m)+(d/=m),c=(i/=f)+(u/=f))}return{top:l,left:i,bottom:s,right:c,width:u,height:d}}}function isScrolledPast(e,t,o){for(var a=getParentAutoScrollElement(e,!0),n=getRect(e)[t];a;){var r=getRect(a)[o];if(!("top"===o||"left"===o?n>=r:n<=r))return a;if(a===getWindowScrollingElement())break;a=getParentAutoScrollElement(a,!1)}return!1}function getChild(e,t,o,a){for(var n=0,r=0,l=e.children;r<l.length;){if("none"!==l[r].style.display&&l[r]!==Sortable.ghost&&(a||l[r]!==Sortable.dragged)&&closest(l[r],o.draggable,e,!1)){if(n===t)return l[r];n++}r++}return null}function lastChild(e,t){for(var o=e.lastElementChild;o&&(o===Sortable.ghost||"none"===css(o,"display")||t&&!matches(o,t));)o=o.previousElementSibling;return o||null}function index(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Sortable.clone||t&&!matches(e,t)||o++;return o}function getRelativeScrollOffset(e){var t=0,o=0,a=getWindowScrollingElement();if(e)do{var n=matrix(e),r=n.a,l=n.d;t+=e.scrollLeft*r,o+=e.scrollTop*l}while(e!==a&&(e=e.parentNode));return[t,o]}function indexOfObject(e,t){for(var o in e)if(e.hasOwnProperty(o))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[o][a])return Number(o);return-1}function getParentAutoScrollElement(e,t){if(!e||!e.getBoundingClientRect)return getWindowScrollingElement();var o=e,a=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var n=css(o);if(o.clientWidth<o.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!o.getBoundingClientRect||o===document.body)return getWindowScrollingElement();if(a||t)return o;a=!0}}}while(o=o.parentNode);return getWindowScrollingElement()}function extend(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function isRectEqual(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function throttle(e,t){return function(){if(!_throttleTimeout){var o=arguments,a=this;1===o.length?e.call(a,o[0]):e.apply(a,o),_throttleTimeout=setTimeout((function(){_throttleTimeout=void 0}),t)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(e,t,o){e.scrollLeft+=t,e.scrollTop+=o}function clone(e){var t=window.Polymer,o=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):o?o(e).clone(!0)[0]:e.cloneNode(!0)}var expando="Sortable"+(new Date).getTime();function AnimationStateManager(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==css(e,"display")&&e!==Sortable.ghost){t.push({target:e,rect:getRect(e)});var o=_objectSpread2({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=matrix(e,!0);a&&(o.top-=a.f,o.left-=a.e)}e.fromRect=o}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(indexOfObject(t,{target:e}),1)},animateAll:function(o){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof o&&o());var n=!1,r=0;t.forEach((function(e){var t=0,o=e.target,l=o.fromRect,i=getRect(o),s=o.prevFromRect,c=o.prevToRect,d=e.rect,u=matrix(o,!0);u&&(i.top-=u.f,i.left-=u.e),o.toRect=i,o.thisAnimationDuration&&isRectEqual(s,i)&&!isRectEqual(l,i)&&(d.top-i.top)/(d.left-i.left)==(l.top-i.top)/(l.left-i.left)&&(t=calculateRealTime(d,s,c,a.options)),isRectEqual(i,l)||(o.prevFromRect=l,o.prevToRect=i,t||(t=a.options.animation),a.animate(o,d,i,t)),t&&(n=!0,r=Math.max(r,t),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),t),o.thisAnimationDuration=t)})),clearTimeout(e),n?e=setTimeout((function(){"function"==typeof o&&o()}),r):"function"==typeof o&&o(),t=[]},animate:function(e,t,o,a){if(a){css(e,"transition",""),css(e,"transform","");var n=matrix(this.el),r=n&&n.a,l=n&&n.d,i=(t.left-o.left)/(r||1),s=(t.top-o.top)/(l||1);e.animatingX=!!i,e.animatingY=!!s,css(e,"transform","translate3d("+i+"px,"+s+"px,0)"),this.forRepaintDummy=repaint(e),css(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),css(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){css(e,"transition",""),css(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}function repaint(e){return e.offsetWidth}function calculateRealTime(e,t,o,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))*a.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var t in defaults)defaults.hasOwnProperty(t)&&!(t in e)&&(e[t]=defaults[t]);plugins.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),plugins.push(e)},pluginEvent:function(e,t,o){var a=this;this.eventCanceled=!1,o.cancel=function(){a.eventCanceled=!0};var n=e+"Global";plugins.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][n]&&t[a.pluginName][n](_objectSpread2({sortable:t},o)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](_objectSpread2({sortable:t},o)))}))},initializePlugins:function(e,t,o,a){for(var n in plugins.forEach((function(a){var n=a.pluginName;if(e.options[n]||a.initializeByDefault){var r=new a(e,t,e.options);r.sortable=e,r.options=e.options,e[n]=r,_extends(o,r.defaults)}})),e.options)if(e.options.hasOwnProperty(n)){var r=this.modifyOption(e,n,e.options[n]);void 0!==r&&(e.options[n]=r)}},getEventProperties:function(e,t){var o={};return plugins.forEach((function(a){"function"==typeof a.eventProperties&&_extends(o,a.eventProperties.call(t[a.pluginName],e))})),o},modifyOption:function(e,t,o){var a;return plugins.forEach((function(n){e[n.pluginName]&&n.optionListeners&&"function"==typeof n.optionListeners[t]&&(a=n.optionListeners[t].call(e[n.pluginName],o))})),a}};function dispatchEvent(e){var t=e.sortable,o=e.rootEl,a=e.name,n=e.targetEl,r=e.cloneEl,l=e.toEl,i=e.fromEl,s=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,u=e.newDraggableIndex,h=e.originalEvent,p=e.putSortable,f=e.extraEventProperties;if(t=t||o&&o[expando]){var m,g=t.options,v="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||IE11OrLess||Edge?(m=document.createEvent("Event")).initEvent(a,!0,!0):m=new CustomEvent(a,{bubbles:!0,cancelable:!0}),m.to=l||o,m.from=i||o,m.item=n||o,m.clone=r,m.oldIndex=s,m.newIndex=c,m.oldDraggableIndex=d,m.newDraggableIndex=u,m.originalEvent=h,m.pullMode=p?p.lastPutMode:void 0;var _=_objectSpread2(_objectSpread2({},f),PluginManager.getEventProperties(a,t));for(var b in _)m[b]=_[b];o&&o.dispatchEvent(m),g[v]&&g[v].call(t,m)}}var _excluded=["evt"],pluginEvent=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.evt,n=_objectWithoutProperties(o,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2({dragEl:dragEl,parentEl:parentEl,ghostEl:ghostEl,rootEl:rootEl,nextEl:nextEl,lastDownEl:lastDownEl,cloneEl:cloneEl,cloneHidden:cloneHidden,dragStarted:moved,putSortable:putSortable,activeSortable:Sortable.active,originalEvent:a,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(e){_dispatchEvent({sortable:t,name:e,originalEvent:a})}},n))};function _dispatchEvent(e){dispatchEvent(_objectSpread2({putSortable:putSortable,cloneEl:cloneEl,targetEl:dragEl,rootEl:rootEl,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex},e))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists="undefined"!=typeof document,PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),_detectDirection=function(e,t){var o=css(e),a=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),n=getChild(e,0,t),r=getChild(e,1,t),l=n&&css(n),i=r&&css(r),s=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+getRect(n).width,c=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+getRect(r).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&l.float&&"none"!==l.float){var d="left"===l.float?"left":"right";return!r||"both"!==i.clear&&i.clear!==d?"horizontal":"vertical"}return n&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||s>=a&&"none"===o[CSSFloatProperty]||r&&"none"===o[CSSFloatProperty]&&s+c>a)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,o){var a=o?e.left:e.top,n=o?e.right:e.bottom,r=o?e.width:e.height,l=o?t.left:t.top,i=o?t.right:t.bottom,s=o?t.width:t.height;return a===l||n===i||a+r/2===l+s/2},_detectNearestEmptySortable=function(e,t){var o;return sortables.some((function(a){var n=a[expando].options.emptyInsertThreshold;if(n&&!lastChild(a)){var r=getRect(a),l=e>=r.left-n&&e<=r.right+n,i=t>=r.top-n&&t<=r.bottom+n;return l&&i?o=a:void 0}})),o},_prepareGroup=function(e){function t(e,o){return function(a,n,r,l){var i=a.options.group.name&&n.options.group.name&&a.options.group.name===n.options.group.name;if(null==e&&(o||i))return!0;if(null==e||!1===e)return!1;if(o&&"clone"===e)return e;if("function"==typeof e)return t(e(a,n,r,l),o)(a,n,r,l);var s=(o?a:n).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var o={},a=e.group;a&&"object"==_typeof(a)||(a={name:a}),o.name=a.name,o.checkPull=t(a.pull,!0),o.checkPut=t(a.put),o.revertClone=a.revertClone,e.group=o},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&document.addEventListener("click",(function(e){if(ignoreNextClick)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ignoreNextClick=!1,!1}),!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[expando]._onDragOver(o)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=_extends({},t),e[expando]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sortable.supportPointer&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};for(var a in PluginManager.initializePlugins(this,e,o),o)!(a in t)&&(t[a]=o[a]);for(var n in _prepareGroup(t),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?on(e,"pointerdown",this._onTapStart):(on(e,"mousedown",this._onTapStart),on(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(e,"dragover",this),on(e,"dragenter",this)),sortables.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),_extends(this,AnimationStateManager())}function _globalDragOver(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function _onMove(e,t,o,a,n,r,l,i){var s,c,d=e[expando],u=d.options.onMove;return!window.CustomEvent||IE11OrLess||Edge?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=o,s.draggedRect=a,s.related=n||t,s.relatedRect=r||getRect(t),s.willInsertAfter=i,s.originalEvent=l,e.dispatchEvent(s),u&&(c=u.call(d,s,l)),c}function _disableDraggable(e){e.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(e,t,o){var a=getRect(getChild(o.el,0,o.options,!0));return t?e.clientX<a.left-10||e.clientY<a.top&&e.clientX<a.right:e.clientY<a.top-10||e.clientY<a.bottom&&e.clientX<a.left}function _ghostIsLast(e,t,o){var a=getRect(lastChild(o.el,o.options.draggable));return t?e.clientX>a.right+10||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+10}function _getSwapDirection(e,t,o,a,n,r,l,i){var s=a?e.clientY:e.clientX,c=a?o.height:o.width,d=a?o.top:o.left,u=a?o.bottom:o.right,h=!1;if(!l)if(i&&targetMoveDistance<c*n){if(!pastFirstInvertThresh&&(1===lastDirection?s>d+c*r/2:s<u-c*r/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)h=!0;else if(1===lastDirection?s<d+targetMoveDistance:s>u-targetMoveDistance)return-lastDirection}else if(s>d+c*(1-n)/2&&s<u-c*(1-n)/2)return _getInsertDirection(t);return(h=h||l)&&(s<d+c*r/2||s>u-c*r/2)?s>d+c/2?1:-1:0}function _getInsertDirection(e){return index(dragEl)<index(e)?1:-1}function _generateId(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,a=0;o--;)a+=t.charCodeAt(o);return a.toString(36)}function _saveInputCheckedState(e){savedInputChecked.length=0;for(var t=e.getElementsByTagName("input"),o=t.length;o--;){var a=t[o];a.checked&&savedInputChecked.push(a)}}function _nextTick(e){return setTimeout(e,0)}function _cancelNextTick(e){return clearTimeout(e)}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(lastTarget=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,o=this.el,a=this.options,n=a.preventOnFilter,r=e.type,l=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,i=(l||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||i,c=a.filter;if(_saveInputCheckedState(o),!dragEl&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||a.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Safari||!i||"SELECT"!==i.tagName.toUpperCase())&&!((i=closest(i,a.draggable,o,!1))&&i.animated||lastDownEl===i)){if(oldIndex=index(i),oldDraggableIndex=index(i,a.draggable),"function"==typeof c){if(c.call(this,e,i,this))return _dispatchEvent({sortable:t,rootEl:s,name:"filter",targetEl:i,toEl:o,fromEl:o}),pluginEvent("filter",t,{evt:e}),void(n&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(a){if(a=closest(s,a.trim(),o,!1))return _dispatchEvent({sortable:t,rootEl:a,name:"filter",targetEl:i,fromEl:o,toEl:o}),pluginEvent("filter",t,{evt:e}),!0}))))return void(n&&e.cancelable&&e.preventDefault());a.handle&&!closest(s,a.handle,o,!1)||this._prepareDragStart(e,l,i)}}},_prepareDragStart:function(e,t,o){var a,n=this,r=n.el,l=n.options,i=r.ownerDocument;if(o&&!dragEl&&o.parentNode===r){var s=getRect(o);if(rootEl=r,parentEl=(dragEl=o).parentNode,nextEl=dragEl.nextSibling,lastDownEl=o,activeGroup=l.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-s.left,tapDistanceTop=tapEvt.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",a=function(){pluginEvent("delayEnded",n,{evt:e}),Sortable.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!FireFox&&n.nativeDraggable&&(dragEl.draggable=!0),n._triggerDragStart(e,t),_dispatchEvent({sortable:n,name:"choose",originalEvent:e}),toggleClass(dragEl,l.chosenClass,!0))},l.ignore.split(",").forEach((function(e){find(dragEl,e.trim(),_disableDraggable)})),on(i,"dragover",nearestEmptyInsertDetectEvent),on(i,"mousemove",nearestEmptyInsertDetectEvent),on(i,"touchmove",nearestEmptyInsertDetectEvent),on(i,"mouseup",n._onDrop),on(i,"touchend",n._onDrop),on(i,"touchcancel",n._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),!l.delay||l.delayOnTouchOnly&&!t||this.nativeDraggable&&(Edge||IE11OrLess))a();else{if(Sortable.eventCanceled)return void this._onDrop();on(i,"mouseup",n._disableDelayedDrag),on(i,"touchend",n._disableDelayedDrag),on(i,"touchcancel",n._disableDelayedDrag),on(i,"mousemove",n._delayedDragTouchMoveHandler),on(i,"touchmove",n._delayedDragTouchMoveHandler),l.supportPointer&&on(i,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(a,l.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):on(document,t?"touchmove":"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(o){}},_dragStarted:function(e,t){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var o=this.options;!e&&toggleClass(dragEl,o.dragClass,!1),toggleClass(dragEl,o.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY))!==t;)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando]){if(t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,o=t.fallbackTolerance,a=t.fallbackOffset,n=e.touches?e.touches[0]:e,r=ghostEl&&matrix(ghostEl,!0),l=ghostEl&&r&&r.a,i=ghostEl&&r&&r.d,s=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),c=(n.clientX-tapEvt.clientX+a.x)/(l||1)+(s?s[0]-ghostRelativeParentInitialScroll[0]:0)/(l||1),d=(n.clientY-tapEvt.clientY+a.y)/(i||1)+(s?s[1]-ghostRelativeParentInitialScroll[1]:0)/(i||1);if(!Sortable.active&&!awaitingDragStarted){if(o&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(ghostEl){r?(r.e+=c-(lastDx||0),r.f+=d-(lastDy||0)):r={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");css(ghostEl,"webkitTransform",u),css(ghostEl,"mozTransform",u),css(ghostEl,"msTransform",u),css(ghostEl,"transform",u),lastDx=c,lastDy=d,touchEvt=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),o=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;"static"===css(ghostRelativeParent,"position")&&"none"===css(ghostRelativeParent,"transform")&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}toggleClass(ghostEl=dragEl.cloneNode(!0),o.ghostClass,!1),toggleClass(ghostEl,o.fallbackClass,!0),toggleClass(ghostEl,o.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,a=e.dataTransfer,n=o.options;pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled?this._onDrop():(pluginEvent("setupClone",this),Sortable.eventCanceled||((cloneEl=clone(dragEl)).draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),o.cloneId=_nextTick((function(){pluginEvent("clone",o),Sortable.eventCanceled||(o.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),o._hideClone(),_dispatchEvent({sortable:o,name:"clone"}))})),!t&&toggleClass(dragEl,n.dragClass,!0),t?(ignoreNextClick=!0,o._loopId=setInterval(o._emulateDragOver,50)):(off(document,"mouseup",o._onDrop),off(document,"touchend",o._onDrop),off(document,"touchcancel",o._onDrop),a&&(a.effectAllowed="move",n.setData&&n.setData.call(o,a,dragEl)),on(document,"drop",o),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,o._dragStartId=_nextTick(o._dragStarted.bind(o,t,e)),on(document,"selectstart",o),moved=!0,Safari&&css(document.body,"user-select","none"))},_onDragOver:function(e){var t,o,a,n,r=this.el,l=e.target,i=this.options,s=i.group,c=Sortable.active,d=activeGroup===s,u=i.sort,h=putSortable||c,p=this,f=!1;if(!_silent){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=closest(l,i.draggable,r,!0),T("dragOver"),Sortable.eventCanceled)return f;if(dragEl.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||p._ignoreWhileAnimating===l)return I(!1);if(ignoreNextClick=!1,c&&!i.disabled&&(d?u||(a=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,c,dragEl,e))&&s.checkPut(this,c,dragEl,e))){if(n="vertical"===this._getDirection(e,l),t=getRect(dragEl),T("dragOverValid"),Sortable.eventCanceled)return f;if(a)return parentEl=rootEl,k(),this._hideClone(),T("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),I(!0);var m=lastChild(r,i.draggable);if(!m||_ghostIsLast(e,n,this)&&!m.animated){if(m===dragEl)return I(!1);if(m&&r===e.target&&(l=m),l&&(o=getRect(l)),!1!==_onMove(rootEl,r,dragEl,t,l,o,e,!!l))return k(),r.appendChild(dragEl),parentEl=r,$(),I(!0)}else if(m&&_ghostIsFirst(e,n,this)){var g=getChild(r,0,i,!0);if(g===dragEl)return I(!1);if(o=getRect(l=g),!1!==_onMove(rootEl,r,dragEl,t,l,o,e,!1))return k(),r.insertBefore(dragEl,g),parentEl=r,$(),I(!0)}else if(l.parentNode===r){o=getRect(l);var v,_,b,x=dragEl.parentNode!==r,w=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||t,l.animated&&l.toRect||o,n),C=n?"top":"left",E=isScrolledPast(l,"top","top")||isScrolledPast(dragEl,"top","top"),y=E?E.scrollTop:void 0;if(lastTarget!==l&&(_=o[C],pastFirstInvertThresh=!1,isCircumstantialInvert=!w&&i.invertSwap||x),0!==(v=_getSwapDirection(e,l,o,n,w?1:i.swapThreshold,null==i.invertedSwapThreshold?i.swapThreshold:i.invertedSwapThreshold,isCircumstantialInvert,lastTarget===l))){var S=index(dragEl);do{S-=v,b=parentEl.children[S]}while(b&&("none"===css(b,"display")||b===ghostEl))}if(0===v||b===l)return I(!1);lastTarget=l,lastDirection=v;var V=l.nextElementSibling,N=!1,D=_onMove(rootEl,r,dragEl,t,l,o,e,N=1===v);if(!1!==D)return 1!==D&&-1!==D||(N=1===D),_silent=!0,setTimeout(_unsilent,30),k(),N&&!V?r.appendChild(dragEl):l.parentNode.insertBefore(dragEl,N?V:l),E&&scrollBy(E,0,y-E.scrollTop),parentEl=dragEl.parentNode,void 0===_||isCircumstantialInvert||(targetMoveDistance=Math.abs(_-getRect(l)[C])),$(),I(!0)}if(r.contains(dragEl))return I(!1)}return!1}function T(i,s){pluginEvent(i,p,_objectSpread2({evt:e,isOwner:d,axis:n?"vertical":"horizontal",revert:a,dragRect:t,targetRect:o,canSort:u,fromSortable:h,target:l,completed:I,onMove:function(o,a){return _onMove(rootEl,r,dragEl,t,o,getRect(o),e,a)},changed:$},s))}function k(){T("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function I(t){return T("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(p),p!==h&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:c.options.ghostClass,!1),toggleClass(dragEl,i.ghostClass,!0)),putSortable!==p&&p!==Sortable.active?putSortable=p:p===Sortable.active&&putSortable&&(putSortable=null),h===p&&(p._ignoreWhileAnimating=l),p.animateAll((function(){T("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(l===dragEl&&!dragEl.animated||l===r&&!l.animated)&&(lastTarget=null),i.dragoverBubble||e.rootEl||l===document||(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!t&&nearestEmptyInsertDetectEvent(e)),!i.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function $(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,i.draggable),_dispatchEvent({sortable:p,name:"change",toEl:r,newIndex:newIndex,newDraggableIndex:newDraggableIndex,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),Sortable.eventCanceled||(awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&"clone"!==putSortable.lastPutMode)&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&(null!=newIndex&&-1!==newIndex||(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach((function(e){e.checked=!0})),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],o=this.el.children,a=0,n=o.length,r=this.options;a<n;a++)closest(e=o[a],r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||_generateId(e));return t},sort:function(e,t){var o={},a=this.el;this.toArray().forEach((function(e,t){var n=a.children[t];closest(n,this.options.draggable,a,!1)&&(o[e]=n)}),this),t&&this.captureAnimationState(),e.forEach((function(e){o[e]&&(a.removeChild(o[e]),a.appendChild(o[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];var a=PluginManager.modifyOption(this,e,t);o[e]=void 0!==a?a:t,"group"===e&&_prepareGroup(o)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode!=rootEl||this.options.group.revertClone?nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl):rootEl.insertBefore(cloneEl,dragEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}else this._hideClone()}},documentExists&&on(document,"touchmove",(function(e){(Sortable.active||awaitingDragStarted)&&e.cancelable&&e.preventDefault()})),Sortable.utils={on:on,off:off,css:css,find:find,is:function(e,t){return!!closest(e,t,e,!1)},extend:extend,throttle:throttle,closest:closest,toggleClass:toggleClass,clone:clone,index:index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild:getChild},Sortable.get=function(e){return e[expando]},Sortable.mount=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),e.utils)),PluginManager.mount(e)}))},Sortable.create=function(e,t){return new Sortable(e,t)},Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):t.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var o=this,a=(e.touches?e.touches[0]:e).clientX,n=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(a,n);if(touchEvt$1=e,t||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(e,this.options,r,t);var l=getParentAutoScrollElement(r,!0);!scrolling||pointerElemChangedInterval&&a===lastAutoScrollX&&n===lastAutoScrollY||(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval((function(){var r=getParentAutoScrollElement(document.elementFromPoint(a,n),!0);r!==l&&(l=r,clearAutoScrolls()),autoScroll(e,o.options,r,t)}),10),lastAutoScrollX=a,lastAutoScrollY=n)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(r,!0)===getWindowScrollingElement())return void clearAutoScrolls();autoScroll(e,this.options,getParentAutoScrollElement(r,!1),!1)}}},_extends(e,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach((function(e){clearInterval(e.pid)})),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle((function(e,t,o,a){if(t.scroll){var n,r=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,i=t.scrollSensitivity,s=t.scrollSpeed,c=getWindowScrollingElement(),d=!1;scrollRootEl!==o&&(scrollRootEl=o,clearAutoScrolls(),scrollEl=t.scroll,n=t.scrollFn,!0===scrollEl&&(scrollEl=getParentAutoScrollElement(o,!0)));var u=0,h=scrollEl;do{var p=h,f=getRect(p),m=f.top,g=f.bottom,v=f.left,_=f.right,b=f.width,x=f.height,w=void 0,C=void 0,E=p.scrollWidth,y=p.scrollHeight,S=css(p),V=p.scrollLeft,N=p.scrollTop;p===c?(w=b<E&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),C=x<y&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(w=b<E&&("auto"===S.overflowX||"scroll"===S.overflowX),C=x<y&&("auto"===S.overflowY||"scroll"===S.overflowY));var D=w&&(Math.abs(_-r)<=i&&V+b<E)-(Math.abs(v-r)<=i&&!!V),T=C&&(Math.abs(g-l)<=i&&N+x<y)-(Math.abs(m-l)<=i&&!!N);if(!autoScrolls[u])for(var k=0;k<=u;k++)autoScrolls[k]||(autoScrolls[k]={});autoScrolls[u].vx==D&&autoScrolls[u].vy==T&&autoScrolls[u].el===p||(autoScrolls[u].el=p,autoScrolls[u].vx=D,autoScrolls[u].vy=T,clearInterval(autoScrolls[u].pid),0==D&&0==T||(d=!0,autoScrolls[u].pid=setInterval(function(){a&&0===this.layer&&Sortable.active._onTouchMove(touchEvt$1);var t=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*s:0,o=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*s:0;"function"==typeof n&&"continue"!==n.call(Sortable.dragged.parentNode[expando],o,t,e,touchEvt$1,autoScrolls[this.layer].el)||scrollBy(autoScrolls[this.layer].el,o,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&h!==c&&(h=getParentAutoScrollElement(h,!1)));scrolling=d}}),30),drop=function(e){var t=e.originalEvent,o=e.putSortable,a=e.dragEl,n=e.activeSortable,r=e.dispatchSortableEvent,l=e.hideGhostForTarget,i=e.unhideGhostForTarget;if(t){var s=o||n;l();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);i(),s&&!s.el.contains(d)&&(r("spill"),this.onSpill({dragEl:a,putSortable:o}))}};function Revert(){}function Remove(){}function pad(e,t){for(;e.length<t;)e="0"+e;return e}function fold(e,t){var o,a;if(0===t.length)return e;for(o=0,a=t.length;o<a;o++)e=(e<<5)-e+t.charCodeAt(o),e|=0;return e<0?-2*e:e}function foldObject(e,t,o){return Object.keys(t).sort().reduce((function(e,a){return foldValue(e,t[a],a,o)}),e)}function foldValue(e,t,o,a){var n=fold(fold(fold(e,o),toString(t)),typeof t);if(null===t)return fold(n,"null");if(void 0===t)return fold(n,"undefined");if("object"==typeof t||"function"==typeof t){if(-1!==a.indexOf(t))return fold(n,"[Circular]"+o);a.push(t);var r=foldObject(n,t,a);if(!("valueOf"in t)||"function"!=typeof t.valueOf)return r;try{return fold(r,String(t.valueOf()))}catch(l){return fold(r,"[valueOf exception]"+(l.stack||l.message))}}return fold(n,t.toString())}function toString(e){return Object.prototype.toString.call(e)}function sum(e){return pad(foldValue(0,e,"",[]).toString(16),8)}Revert.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var a=getChild(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:drop},_extends(Revert,{pluginName:"revertOnSpill"}),Remove.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:drop},_extends(Remove,{pluginName:"removeOnSpill"}),Sortable.mount(new AutoScrollPlugin),Sortable.mount(Remove,Revert);var hashSum=sum,sum$1=hashSum,baseClone=_baseClone,CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(e){return baseClone(e,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var cloneDeep_1=cloneDeep,CrewList_vue_vue_type_style_index_0_scoped_true_lang="\n.textArea[data-v-4fb6cb7a] {\n  background: white;\n  color: black;\n}\n.charEditCardText[data-v-4fb6cb7a] {\n  opacity: 100;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-evenly;\n  align-items: flex-center;\n}\n.charEditCardText > *[data-v-4fb6cb7a] {\n  margin: 0 8px;\n  margin-bottom: 16px;\n}\ninput[data-v-4fb6cb7a] {\n  border: 1px solid white;\n  color: white;\n  font-size: 2em;\n  padding-left: 8px;\n}\nselect[data-v-4fb6cb7a] {\n  border: 1px solid white;\n  font-size: 2em;\n  padding-left: 8px;\n  line-height: 40px;\n  cursor: pointer;\n  border-radius: 5px;\n}\noption[data-v-4fb6cb7a] {\n  background: rgb(var(--v-theme-surface));\n}\n.mainCard.v-card[data-v-4fb6cb7a] {\n  background-color: rgb(var(--v-theme-background));\n}\n.iconButton[data-v-4fb6cb7a] {\n  cursor: pointer;\n}\n.captain[data-v-4fb6cb7a] {\n  color: #718fb7;\n}\n.engineer[data-v-4fb6cb7a] {\n  color: #d7ac60;\n}\n.mechanic[data-v-4fb6cb7a] {\n  color: #60c9d0;\n}\n.securityofficer[data-v-4fb6cb7a] {\n  color: #8d776a;\n}\n.medicaldoctor[data-v-4fb6cb7a] {\n  color: #b9472b;\n}\n.assistant[data-v-4fb6cb7a] {\n  color: #f8f8f8;\n}\n";const _sfc_main$4={data:()=>({addCharDialog:!1,addCharDialogVal:"",editDialog:!1,showTextarea:!1,textAreaVal:"",color:{captain:"#718fb7",engineer:"#d7ac60",mechanic:"#60c9d0",securityofficer:"#8d776a",medicaldoctor:"#b9472b",assistant:"#f8f8f8"},selectedChar:null,charClone:null}),computed:__spreadProps(__spreadValues({},mapGetters(["isMultiPlayer"])),{crewList(){return this.$store.getters.campaign.elements.find((e=>this.isMultiPlayer?"bots"==e.name:"crew"==e.name))},characterArray(){return this.crewList.elements.filter((e=>"Character"===e.name))},cloneJob(){return this.charClone?this.charClone.elements.find((e=>"job"==e.name)):{}},canExportPlayers(){return this.$store.state.playerCharacters.length>0}}),methods:{hashWrapper:e=>sum$1(e),editChar(e){this.selectedChar=e,this.charClone=cloneDeep_1(e),this.editDialog=!0},editDialogClose(){if(this.showTextarea)return this.showTextarea=!1,void(this.textAreaVal="");this.editDialog=!1,this.selectedChar=null,this.charClone=null},editDialogSave(){if(this.showTextarea){let e,o=this.textAreaVal;try{e=lib.xml2js(o).elements[0]}catch(t){return console.warn(t),void this.$store.dispatch("showAlert",{type:"error",text:`XML parser fail: ${t.message}`})}return e.attributes.name?(this.charClone=e,this.$store.dispatch("showAlert",{type:"success",text:`Loaded ${this.charClone.attributes.name} xml changes.`}),void(this.showTextarea=!1)):void this.$store.dispatch("showAlert",{type:"error",text:"Failed to read character name - file may be invalid or corrupted"})}this.editDialog=!1,this.charClone.attributes.name===this.selectedChar.attributes.name||this.charClone.attributes.originalname||(this.charClone.attributes.originalname=this.selectedChar.attributes.name);let e=this.crewList.elements.indexOf(this.selectedChar);this.crewList.elements[e]=this.charClone,this.selectedChar=null,this.$store.dispatch("showAlert",{type:"success",text:`Modified character ${this.charClone.attributes.name}`}),this.charClone=null},deleteChar(e){let t=this.crewList.elements.indexOf(e);if(-1==t)return console.error("faled to delete - element not found");this.crewList.elements.splice(t,1),this.$store.dispatch("showAlert",{type:"success",text:`Removed ${e.attributes.name} from the crew.`})},async copyChar(){let e=desanitized_js2xml({elements:[this.charClone]},{spaces:4});await navigator.clipboard.writeText(e),this.$store.dispatch("showAlert",{type:"success",text:`Copied ${this.charClone.attributes.name} to system clipboard.`})},async pasteChar(){let e,t=await navigator.clipboard.readText();try{e=lib.xml2js(t).elements[0]}catch(o){return console.warn(o),void this.$store.dispatch("showAlert",{type:"error",text:`XML parser fail: ${o.message}`})}e.attributes.name?(this.charClone=e,this.$store.dispatch("showAlert",{type:"success",text:`Pasted ${this.charClone.attributes.name} from system clipboard.`})):this.$store.dispatch("showAlert",{type:"error",text:"Failed to read character name - file may be invalid or corrupted"})},rawEditChar(){this.textAreaVal=desanitized_js2xml({elements:[this.charClone]},{spaces:4}),this.showTextarea=!0},addNew(){let e={type:"element",name:"Character",attributes:{name:"New Assistant",originalname:"New Assistant",speciesname:"human",gender:"female",race:"Asian",salary:"2137",headspriteid:"6",hairindex:"2",beardindex:"0",moustacheindex:"0",faceattachmentindex:"0",startitemsgiven:"false",ragdoll:"",personality:"Crazy"},elements:[{type:"element",name:"job",attributes:{name:"Assistant",identifier:"assistant"},elements:[{type:"element",name:"skill",attributes:{identifier:"weapons",level:"20"}},{type:"element",name:"skill",attributes:{identifier:"mechanical",level:"20"}},{type:"element",name:"skill",attributes:{identifier:"electrical",level:"20"}},{type:"element",name:"skill",attributes:{identifier:"medical",level:"20"}},{type:"element",name:"skill",attributes:{identifier:"helm",level:"20"}}]},{type:"element",name:"inventory",elements:[]},{type:"element",name:"health",elements:[{type:"element",name:"LimbHealth",attributes:{i:"0"}},{type:"element",name:"LimbHealth",attributes:{i:"1"}},{type:"element",name:"LimbHealth",attributes:{i:"2"}},{type:"element",name:"LimbHealth",attributes:{i:"3"}},{type:"element",name:"LimbHealth",attributes:{i:"4"}},{type:"element",name:"LimbHealth",attributes:{i:"5"}}]},{type:"element",name:"orders"}]};for(var t=1,o="New Assistant";this.characterArray.find((e=>{var t;return null==(t=e.attributes.originalname)?void 0:t.startsWith(o)}));)o="New Assistant"+t++,e.attributes.originalname=o;this.crewList.elements.unshift(e)},addFromXml(e){let t;try{t=lib.xml2js(e).elements[0]}catch(o){return console.warn(o),this.$store.dispatch("showAlert",{type:"error",text:`XML parser fail: ${o.message}`}),!1}return t.attributes.name?(this.crewList.elements.unshift(t),this.$store.dispatch("showAlert",{type:"success",text:`Added new character: ${t.attributes.name}.`}),!0):(this.$store.dispatch("showAlert",{type:"error",text:"Failed to read character name - file may be invalid or corrupted"}),!1)},async addFromClip(){let e=await navigator.clipboard.readText();this.addFromXml(e)},addFromInput(){this.addFromXml(this.addCharDialogVal)&&(this.addCharDialog=!1,this.addCharDialogVal="")},exportPlayers(){var e;let t=0,o=lib.xml2js("<CharacterData></CharacterData>").elements[0];o.elements=[];for(let r of this.characterArray){let a=null!=(e=r.attributes.originalname)?e:r.attributes.name,n=this.$store.state.playerCharacters.find((e=>e.name==a));if(!n)continue;let l=cloneDeep_1(r),i=lib.xml2js(`<CharacterCampaignData name="${n.name}" endpoint="${n.endpoint}" steamid="${n.steamid}"></CharacterCampaignData>`).elements[0];i.elements=[];let s=l.elements.splice(l.elements.findIndex((e=>"inventory"==e.name)),1)[0],c=l.elements.splice(l.elements.findIndex((e=>"health"==e.name)),1)[0];i.elements.push(l),i.elements.push(s),i.elements.push(c),o.elements.push(i),t++}if(!t)return this.$store.dispatch("showAlert",{type:"info",text:"Could not match any of the crew characters with their CharacterCampaignData"});let a=gsHeader+desanitized_js2xml({elements:[o]},{spaces:4}),n=document.createElement("a");n.href=URL.createObjectURL(new Blob([a],{type:"application/xml"})),n.download=this.$store.state.savefileName.slice(0,-5)+"_CharacterData.xml",n.click(),this.$store.dispatch("showAlert",{type:"success",text:`Exported and prompted to download ${t} player characters`})}},mounted(){var e=document.getElementById("crewListWrapper");Sortable.create(e,{animation:150,handle:".grabHandle",onSort:e=>{const t=this.characterArray[e.oldIndex],o=this.crewList.elements.indexOf(t),a=this.crewList.elements.indexOf(this.characterArray[e.newIndex]);this.crewList.elements.splice(o,1),this.crewList.elements.splice(a,0,t)}})}},_withScopeId$1=e=>(pushScopeId("data-v-4fb6cb7a"),e=e(),popScopeId(),e),_hoisted_1$3={class:"name"},_hoisted_2$3=createTextVNode("mdi-drag-horizontal-variant"),_hoisted_3$3=createTextVNode(" mdi-file-edit-outline "),_hoisted_4$3=createTextVNode(" mdi-delete-outline "),_hoisted_5$3=createTextVNode("mdi-file-download-outline"),_hoisted_6$3=_withScopeId$1((()=>createBaseVNode("div",{class:"pt-1"},"Add:",-1))),_hoisted_7$1=createTextVNode("mdi-account-plus-outline"),_hoisted_8$1=createTextVNode("mdi-account-edit-outline"),_hoisted_9$1=_withScopeId$1((()=>createBaseVNode("span",{class:"text-h5"},"Add character from xml",-1))),_hoisted_10$1=createTextVNode(" Cancel "),_hoisted_11$1=createTextVNode(" Add "),_hoisted_12$1=createTextVNode("mdi-clipboard-arrow-up-outline"),_hoisted_13$1={class:"text-h4"},_hoisted_14$1=createTextVNode("Editing "),_hoisted_15$1={class:"text-black"},_hoisted_16$1=_withScopeId$1((()=>createBaseVNode("span",{class:"text-h4"},"General",-1))),_hoisted_17$1=_withScopeId$1((()=>createBaseVNode("div",{class:"text-h5"},"Raw xml:",-1))),_hoisted_18$1=createTextVNode("mdi-clipboard-arrow-down-outline"),_hoisted_19$1=createTextVNode("mdi-clipboard-arrow-up-outline"),_hoisted_20$1=createTextVNode("mdi-file-edit-outline"),_hoisted_21$1=_withScopeId$1((()=>createBaseVNode("span",{class:"text-h4"},"Job & Skills",-1))),_hoisted_22$1=_withScopeId$1((()=>createBaseVNode("div",{class:"text-h5"},"Job:",-1))),_hoisted_23$1=_withScopeId$1((()=>createBaseVNode("option",{class:"captain",value:"captain"},"Captain",-1))),_hoisted_24$1=_withScopeId$1((()=>createBaseVNode("option",{class:"securityofficer",value:"securityofficer"},"Security Officer",-1))),_hoisted_25$1=_withScopeId$1((()=>createBaseVNode("option",{class:"medicaldoctor",value:"medicaldoctor"},"Medical Doctor",-1))),_hoisted_26$1=_withScopeId$1((()=>createBaseVNode("option",{class:"engineer",value:"engineer"},"Engineer",-1))),_hoisted_27$1=_withScopeId$1((()=>createBaseVNode("option",{class:"mechanic",value:"mechanic"},"Mechanic",-1))),_hoisted_28=_withScopeId$1((()=>createBaseVNode("option",{class:"assistant",value:"assistant"},"Assistant",-1))),_hoisted_29=[_hoisted_23$1,_hoisted_24$1,_hoisted_25$1,_hoisted_26$1,_hoisted_27$1,_hoisted_28],_hoisted_30=_withScopeId$1((()=>createBaseVNode("div",{class:"text-h5"},"Skills",-1))),_hoisted_31=["onUpdate:modelValue"],_hoisted_32=createTextVNode(" Cancel "),_hoisted_33=createTextVNode(" Save ");function _sfc_render$4(e,t,o,a,n,r){const l=resolveComponent("v-card-title"),i=resolveComponent("v-card-header"),s=resolveComponent("v-spacer"),c=resolveComponent("v-icon"),d=resolveComponent("v-sheet"),u=resolveComponent("v-btn"),h=resolveComponent("v-card-text"),p=resolveComponent("v-card-actions"),f=resolveComponent("v-card"),m=resolveComponent("v-dialog"),g=resolveComponent("v-text-field"),v=resolveComponent("v-col"),_=resolveComponent("v-row");return openBlock(),createElementBlock(Fragment,null,[createVNode(f,{elevation:"1",class:"pb-2"},{default:withCtx((()=>[createVNode(i,{class:"flex-column align-center"},{default:withCtx((()=>[createVNode(l,null,{default:withCtx((()=>[createTextVNode(toDisplayString(e.isMultiPlayer?"Hired Bots":"Current Crew"),1)])),_:1})])),_:1}),createVNode(d,{class:"mb-2",id:"crewListWrapper"},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.characterArray,(e=>(openBlock(),createBlock(d,{key:r.hashWrapper(e.attributes),class:normalizeClass(`d-flex flex-row justify-center px-4 ${e.elements.find((e=>"job"==e.name)).attributes.identifier}`)},{default:withCtx((()=>[createBaseVNode("div",_hoisted_1$3,toDisplayString(e.attributes.name),1),createVNode(s),createVNode(c,{style:{cursor:"grabbing"},class:"grabHandle",color:"secondary"},{default:withCtx((()=>[_hoisted_2$3])),_:1}),createVNode(c,{title:"Edit character",color:"secondary",class:"iconButton",onClick:t=>r.editChar(e)},{default:withCtx((()=>[_hoisted_3$3])),_:2},1032,["onClick"]),createVNode(c,{title:"Delete character",color:"red",class:"iconButton",onClick:t=>r.deleteChar(e)},{default:withCtx((()=>[_hoisted_4$3])),_:2},1032,["onClick"])])),_:2},1032,["class"])))),128))])),_:1}),createVNode(d,{class:"d-flex flex-row align-center pl-4 pr-2"},{default:withCtx((()=>[r.canExportPlayers?(openBlock(),createBlock(u,{key:0,title:"Export player characters",icon:"",size:"x-small",onClick:r.exportPlayers},{default:withCtx((()=>[createVNode(c,{color:"secondary"},{default:withCtx((()=>[_hoisted_5$3])),_:1})])),_:1},8,["onClick"])):createCommentVNode("",!0),_hoisted_6$3,createVNode(s),createVNode(u,{title:"Add new assistant character",icon:"",size:"x-small",onClick:r.addNew},{default:withCtx((()=>[createVNode(c,{color:"secondary"},{default:withCtx((()=>[_hoisted_7$1])),_:1})])),_:1},8,["onClick"]),createVNode(u,{title:"Add character from xml",icon:"",size:"x-small",onClick:t[3]||(t[3]=e=>n.addCharDialog=!0)},{default:withCtx((()=>[createVNode(c,{color:"secondary"},{default:withCtx((()=>[_hoisted_8$1])),_:1}),createVNode(m,{class:"editCharacter",modelValue:n.addCharDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>n.addCharDialog=e)},{default:withCtx((()=>[createVNode(f,{class:"d-flex flex-column",style:{width:"100%",height:"100%"}},{default:withCtx((()=>[createVNode(l,null,{default:withCtx((()=>[_hoisted_9$1])),_:1}),createVNode(h,{class:"d-flex flex-grow-1"},{default:withCtx((()=>[withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.addCharDialogVal=e),spellcheck:"false",class:"textArea d-flex px-2 flex-grow-1"},null,512),[[vModelText,n.addCharDialogVal]])])),_:1}),createVNode(p,{style:{flex:"0 1 auto"}},{default:withCtx((()=>[createVNode(s),createVNode(u,{color:"red darken-1",text:"",onClick:t[1]||(t[1]=e=>n.addCharDialog=!1)},{default:withCtx((()=>[_hoisted_10$1])),_:1}),createVNode(u,{color:"green darken-1",text:"",onClick:r.addFromInput},{default:withCtx((()=>[_hoisted_11$1])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),createVNode(u,{title:"Paste character xml from clipboard",icon:"",size:"x-small",onClick:r.addFromClip},{default:withCtx((()=>[createVNode(c,{color:"secondary"},{default:withCtx((()=>[_hoisted_12$1])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),createVNode(m,{persistent:"",class:"editCharacter",modelValue:n.editDialog,"onUpdate:modelValue":t[9]||(t[9]=e=>n.editDialog=e),fullscreen:""},{default:withCtx((()=>[createVNode(f,{class:"d-flex flex-column mainCard",style:{width:"100%",height:"100%"}},{default:withCtx((()=>[createVNode(l,{style:{"background-color":"rgb(var(--v-theme-primary))"}},{default:withCtx((()=>{var e,t;return[createBaseVNode("span",_hoisted_13$1,[_hoisted_14$1,createBaseVNode("span",_hoisted_15$1,toDisplayString(null==(t=null==(e=n.charClone)?void 0:e.attributes)?void 0:t.name),1)])]})),_:1}),n.charClone?(openBlock(),createBlock(h,{key:0,class:"d-flex flex-grow-1"},{default:withCtx((()=>[n.showTextarea?withDirectives((openBlock(),createElementBlock("textarea",{key:1,"onUpdate:modelValue":t[6]||(t[6]=e=>n.textAreaVal=e),spellcheck:"false",class:"textArea d-flex px-2 flex-grow-1"},null,512)),[[vModelText,n.textAreaVal]]):(openBlock(),createBlock(_,{key:0},{default:withCtx((()=>[createVNode(v,null,{default:withCtx((()=>[createVNode(f,{elevation:"1"},{default:withCtx((()=>[createVNode(l,null,{default:withCtx((()=>[_hoisted_16$1])),_:1}),createVNode(h,{class:"charEditCardText"},{default:withCtx((()=>[createBaseVNode("div",null,[createVNode(g,{label:"Name",variant:"outlined",style:{color:"white","min-width":"200px"},class:"mb-4 mt-3",type:"text",modelValue:n.charClone.attributes.name,"onUpdate:modelValue":t[4]||(t[4]=e=>n.charClone.attributes.name=e)},null,8,["modelValue"])]),createBaseVNode("div",null,[_hoisted_17$1,createVNode(u,{title:"Copy character xml to clipboard",size:"x-small",icon:"",onClick:r.copyChar},{default:withCtx((()=>[createVNode(c,{color:"secondary"},{default:withCtx((()=>[_hoisted_18$1])),_:1})])),_:1},8,["onClick"]),createVNode(u,{title:"Paste character xml from clipboard",size:"x-small",icon:"",onClick:r.pasteChar},{default:withCtx((()=>[createVNode(c,{color:"secondary"},{default:withCtx((()=>[_hoisted_19$1])),_:1})])),_:1},8,["onClick"]),createVNode(u,{title:"Edit raw xml",size:"x-small",icon:"",onClick:r.rawEditChar},{default:withCtx((()=>[createVNode(c,{color:"secondary"},{default:withCtx((()=>[_hoisted_20$1])),_:1})])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1}),createVNode(v,null,{default:withCtx((()=>[createVNode(f,{elevation:"1"},{default:withCtx((()=>[createVNode(l,null,{default:withCtx((()=>[_hoisted_21$1])),_:1}),createVNode(h,{class:"charEditCardText"},{default:withCtx((()=>[createBaseVNode("div",null,[_hoisted_22$1,withDirectives(createBaseVNode("select",{class:normalizeClass(r.cloneJob.attributes.identifier),"onUpdate:modelValue":t[5]||(t[5]=e=>r.cloneJob.attributes.identifier=e)},_hoisted_29,2),[[vModelSelect,r.cloneJob.attributes.identifier]])]),createBaseVNode("div",null,[_hoisted_30,createBaseVNode("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.cloneJob.elements,(e=>(openBlock(),createElementBlock("div",{key:e.attributes.identifier},[createBaseVNode("div",null,toDisplayString(e.attributes.identifier),1),withDirectives(createBaseVNode("input",{type:"number",min:"0",max:"100",style:{width:"6em"},"onUpdate:modelValue":t=>e.attributes.level=t},null,8,_hoisted_31),[[vModelText,e.attributes.level]])])))),128))])])])),_:1})])),_:1})])),_:1})])),_:1}))])),_:1})):createCommentVNode("",!0),createVNode(p,{style:{flex:"0 1 auto"}},{default:withCtx((()=>[createVNode(s),createVNode(u,{color:"red darken-1",text:"",onClick:t[7]||(t[7]=e=>r.editDialogClose())},{default:withCtx((()=>[_hoisted_32])),_:1}),createVNode(u,{color:"green darken-1",text:"",onClick:t[8]||(t[8]=e=>r.editDialogSave())},{default:withCtx((()=>[_hoisted_33])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}_sfc_main$4.render=_sfc_render$4,_sfc_main$4.__scopeId="data-v-4fb6cb7a",installAssets(_sfc_main$4,"components",{VCardTitle:VCardTitle,VCardHeader:VCardHeader,VSpacer:VSpacer,VIcon:VIcon,VSheet:VSheet,VBtn:VBtn,VCardText:VCardText,VCardActions:VCardActions,VCard:VCard,VDialog:VDialog,VTextField:VTextField,VCol:VCol,VRow:VRow});var MiscSaveTools_vue_vue_type_style_index_0_scoped_true_lang="\n.iconButton[data-v-44dc79d7] {\n  cursor: pointer;\n}\ninput[data-v-44dc79d7] {\n  border: 1px solid white;\n  width: 100%;\n}\n.toolTitle[data-v-44dc79d7] {\n  font-weight: normal;\n  font-size: 1.1em;\n  align-self: center;\n  margin-left: 12px;\n}\n.toolContent[data-v-44dc79d7]:not(:last-child) {\n  margin-bottom: 16px;\n}\n.textArea[data-v-44dc79d7] {\n  background: white;\n  color: black;\n}\n";const _sfc_main$3={setup(){const e=useStore();return{isMP:computed((()=>e.getters.isMultiPlayer)),campaignId:campaignIdSetup(),convert:convertSetup(),gameses:gamesesSetup(),money:moneySetup()}}};function moneySetup(){const e=useStore(),t=computed((()=>e.getters.campaign.attributes.money)),o=ref(t.value),a=computed((()=>o.value!==t.value));function n(){parseInt(o.value)>=0?(e.getters.campaign.attributes.money=o.value,e.dispatch("showAlert",{type:"success",text:`Set current money to "${o.value}".`})):e.dispatch("showAlert",{type:"info",text:"Value must be a positive number."})}return watch(t,(e=>{o.value=e})),{inputVal:o,isDifferent:a,click:n,keyUp:function(e){"Enter"===e.key&&n()}}}function campaignIdSetup(){const e=useStore(),t=computed((()=>{var t,o,a;return(null==(a=null==(o=null==(t=e.state.gamesession.elements)?void 0:t[0])?void 0:o.attributes)?void 0:a.campaignid)||"-1"})),o=ref(t.value),a=computed((()=>o.value!==t.value));function n(){""!=o.value?(e.state.gamesession.elements[0].attributes.campaignid=o.value,e.dispatch("showAlert",{type:"success",text:`Set campaign ID to "${o.value}".`})):e.dispatch("showAlert",{type:"info",text:"ID can't be empty."})}return watch(t,(e=>{o.value=e})),{inputVal:o,isDifferent:a,click:n,keyUp:function(e){"Enter"===e.key&&n()}}}function gamesesSetup(){const e=useStore(),t=ref(!1),o=ref("");return{download:function(){let t=gsHeader+desanitized_js2xml(e.state.gamesession),o=document.createElement("a");o.href=URL.createObjectURL(new Blob([t],{type:"application/xml"})),o.download="gamesession.xml",o.click()},edit:function(){t.value=!0,o.value=gsHeader+desanitized_js2xml(e.state.gamesession,{spaces:4})},dialog:t,xmlString:o,saveChanges:function(){var t,a,n;let r;try{r=lib.xml2js(o.value.substring(gsHeader.length))}catch(l){return console.warn(l),void e.dispatch("showAlert",{type:"error",text:`XML parser fail: ${l.message}`})}(null==(n=null==(a=null==(t=r.elements)?void 0:t[0])?void 0:a.elements)?void 0:n.find((e=>"MultiPlayerCampaign"===e.name||"SinglePlayerCampaign"===e.name)))?(e.commit("SET_GAMESESSION",r),e.dispatch("showAlert",{type:"success",text:'Updated "gamesession.xml".'})):(console.warn("Failed to find campaign element in new gamesession - aborting"),e.dispatch("showAlert",{type:"error",text:"Campaign data not found in the gamesession - make sure the xml is correct. Changes were not saved."}))},closeDialog:function(){t.value=!1,o.value=""},copy:async function(){let t=gsHeader+desanitized_js2xml(e.state.gamesession,{spaces:4});await navigator.clipboard.writeText(t),e.dispatch("showAlert",{type:"success",text:"Copied gamesession.xml to system clipboard."})},paste:async function(){var o,a,n;let r,l=await navigator.clipboard.readText();try{r=lib.xml2js(l.substring(gsHeader.length))}catch(i){return console.warn(i),void e.dispatch("showAlert",{type:"error",text:`XML parser fail: ${i.message}`})}(null==(n=null==(a=null==(o=r.elements)?void 0:o[0])?void 0:a.elements)?void 0:n.find((e=>"MultiPlayerCampaign"===e.name||"SinglePlayerCampaign"===e.name)))?(e.commit("SET_GAMESESSION",r),t.value=!1,e.dispatch("showAlert",{type:"success",text:'Pasted "gamesession.xml" from clipboard.'})):(console.warn("Failed to find campaign element in new gamesession - aborting"),e.dispatch("showAlert",{type:"error",text:"Campaign data not found in the gamesession - make sure the xml is correct."}))}}}function convertSetup(){const e=useStore();return{dialog:ref(!1),click:async function(){await e.dispatch("setLoading",!0),await new Promise((e=>setTimeout(e,50))),e.dispatch("convertSaveFile")}}}const _withScopeId=e=>(pushScopeId("data-v-44dc79d7"),e=e(),popScopeId(),e),_hoisted_1$2=createTextVNode(" Misc Tools "),_hoisted_2$2={class:"d-flex flex-row justify-space-between pr-2 toolContent mb-8",style:{width:"100%","max-width":"320px"}},_hoisted_3$2=_withScopeId((()=>createBaseVNode("h3",{class:"toolTitle d-block"},"Gamesession.xml",-1))),_hoisted_4$2=createTextVNode(" mdi-clipboard-arrow-down-outline "),_hoisted_5$2=createTextVNode(" mdi-clipboard-arrow-up-outline "),_hoisted_6$2=createTextVNode(" mdi-file-download-outline "),_hoisted_7=createTextVNode(" mdi-file-edit-outline "),_hoisted_8=_withScopeId((()=>createBaseVNode("span",{class:"text-h5"},"Manualy edit gamesession.xml",-1))),_hoisted_9=createTextVNode(" Cancel "),_hoisted_10=createTextVNode(" Save "),_hoisted_11=_withScopeId((()=>createBaseVNode("h3",{class:"toolTitle"},"Save conversion",-1))),_hoisted_12={class:"toolContent d-flex flex-row justify-space-between align-center px-2 mb-8"},_hoisted_13={class:"text"},_hoisted_14=createTextVNode(" Convert to a "),_hoisted_15={class:"text-primary"},_hoisted_16=createTextVNode(" format: "),_hoisted_17=createTextVNode("mdi-file-sync-outline"),_hoisted_18=createTextVNode("mdi-help-circle-outline"),_hoisted_19=createTextVNode("Savefile format convertion info"),_hoisted_20={class:"text-h5"},_hoisted_21=createTextVNode("mdi-close-thick"),_hoisted_22=_withScopeId((()=>createBaseVNode("div",{class:"text"},[createTextVNode(" - Hired bots will be turned into crew members"),createBaseVNode("br"),createBaseVNode("br"),createTextVNode(" Please note that the player-controlled characters are not saved inside the .save file."),createBaseVNode("br"),createTextVNode("If you wish to have them in single-player, you need to import them by loading "),createBaseVNode("span",{class:"text-primary"},'(...)_CharacterData.xml"'),createTextVNode(" file. ")],-1))),_hoisted_23=_withScopeId((()=>createBaseVNode("div",{class:"text"},[createTextVNode(" - Submarines you can purchase at the shipyard well be limited to a specific list. If you want to purchase non-vanilla submarine, make sure to add its name to that list."),createBaseVNode("br"),createTextVNode(" - Current crew will be turned into bots."),createBaseVNode("br"),createTextVNode(" - Random campaign id will be generated. Make sure it's not conflicting with any of your other multiplayer saves."),createBaseVNode("br")],-1))),_hoisted_24={key:0,class:"toolContent d-flex flex-row justify-space-between align-center px-2"},_hoisted_25=createTextVNode(" SET "),_hoisted_26={class:"toolContent d-flex flex-row justify-space-between align-center px-2"},_hoisted_27=createTextVNode(" SET ");function _sfc_render$3(e,t,o,a,n,r){const l=resolveComponent("v-card-title"),i=resolveComponent("v-card-header"),s=resolveComponent("v-spacer"),c=resolveComponent("v-icon"),d=resolveComponent("v-card-text"),u=resolveComponent("v-btn"),h=resolveComponent("v-card-actions"),p=resolveComponent("v-card"),f=resolveComponent("v-dialog"),m=resolveComponent("v-tooltip"),g=resolveComponent("v-divider"),v=resolveComponent("v-text-field"),_=resolveComponent("v-sheet");return openBlock(),createBlock(p,{elevation:"1",class:"pb-2"},{default:withCtx((()=>[createVNode(i,{class:"flex-column align-center"},{default:withCtx((()=>[createVNode(l,null,{default:withCtx((()=>[_hoisted_1$2])),_:1})])),_:1}),createVNode(_,{class:"d-flex flex-column align-center"},{default:withCtx((()=>[createBaseVNode("div",_hoisted_2$2,[_hoisted_3$2,createVNode(s),createVNode(c,{title:"Copy to clipboard",color:"secondary",class:"iconButton",onClick:t[0]||(t[0]=e=>a.gameses.copy())},{default:withCtx((()=>[_hoisted_4$2])),_:1}),createVNode(c,{title:"Paste from clipboard",color:"secondary",class:"iconButton",onClick:t[1]||(t[1]=e=>a.gameses.paste())},{default:withCtx((()=>[_hoisted_5$2])),_:1}),createVNode(c,{title:"Download",color:"secondary",class:"iconButton",onClick:t[2]||(t[2]=e=>a.gameses.download())},{default:withCtx((()=>[_hoisted_6$2])),_:1}),createVNode(c,{title:"Edit xml",color:"secondary",class:"iconButton",onClick:t[3]||(t[3]=withModifiers((e=>a.gameses.edit()),["stop"]))},{default:withCtx((()=>[_hoisted_7])),_:1}),createVNode(f,{class:"fullscreen",modelValue:a.gameses.dialog.value,"onUpdate:modelValue":t[7]||(t[7]=e=>a.gameses.dialog.value=e),fullscreen:""},{default:withCtx((()=>[createVNode(p,{class:"d-flex flex-column",style:{width:"100%",height:"100%"}},{default:withCtx((()=>[createVNode(l,null,{default:withCtx((()=>[_hoisted_8])),_:1}),createVNode(d,{class:"d-flex flex-grow-1"},{default:withCtx((()=>[withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.gameses.xmlString.value=e),spellcheck:"false",class:"textArea d-flex px-2 flex-grow-1"},null,512),[[vModelText,a.gameses.xmlString.value]])])),_:1}),createVNode(h,{style:{flex:"0 1 auto"}},{default:withCtx((()=>[createVNode(s),createVNode(u,{color:"red darken-1",text:"",onClick:t[5]||(t[5]=e=>a.gameses.closeDialog())},{default:withCtx((()=>[_hoisted_9])),_:1}),createVNode(u,{color:"green darken-1",text:"",onClick:t[6]||(t[6]=e=>a.gameses.saveChanges())},{default:withCtx((()=>[_hoisted_10])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])]),_hoisted_11,createBaseVNode("div",_hoisted_12,[createBaseVNode("div",_hoisted_13,[_hoisted_14,createBaseVNode("span",_hoisted_15,toDisplayString(a.isMP?"single":"multi")+"-player",1),_hoisted_16]),createVNode(s),createVNode(u,{title:"Convert",onClick:a.convert.click,size:"x-small",icon:""},{default:withCtx((()=>[createVNode(c,{color:"secondary"},{default:withCtx((()=>[_hoisted_17])),_:1})])),_:1},8,["onClick"]),createVNode(u,{onClick:t[8]||(t[8]=withModifiers((e=>a.convert.dialog.value=!0),["stop"])),size:"x-small",icon:""},{default:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>[_hoisted_18])),_:1}),createVNode(m,{anchor:"bottom",activator:"parent"},{default:withCtx((()=>[_hoisted_19])),_:1})])),_:1}),createVNode(f,{class:"convertInfo",modelValue:a.convert.dialog.value,"onUpdate:modelValue":t[10]||(t[10]=e=>a.convert.dialog.value=e)},{default:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(l,null,{default:withCtx((()=>[createBaseVNode("span",_hoisted_20,toDisplayString(a.isMP?"Multi-player to single-player convertion":"Single-player to multi-player convertion"),1),createVNode(s),createVNode(u,{color:"red",size:"x-small",icon:"",onClick:t[9]||(t[9]=e=>a.convert.dialog.value=!1)},{default:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>[_hoisted_21])),_:1})])),_:1})])),_:1}),createVNode(g),a.isMP?(openBlock(),createBlock(d,{key:0,class:"px-2"},{default:withCtx((()=>[_hoisted_22])),_:1})):(openBlock(),createBlock(d,{key:1,class:"px-2"},{default:withCtx((()=>[_hoisted_23])),_:1}))])),_:1})])),_:1},8,["modelValue"])]),a.isMP?(openBlock(),createElementBlock("div",_hoisted_24,[createVNode(v,{"hide-details":"true",density:"comfortable",label:"Campaign ID",variant:"outlined",style:{color:"white","min-width":"140px"},modelValue:a.campaignId.inputVal.value,"onUpdate:modelValue":t[11]||(t[11]=e=>a.campaignId.inputVal.value=e),onKeyup:a.campaignId.keyUp,class:normalizeClass(["mr-2 mb-0",{"text-secondary":a.campaignId.isDifferent.value,"text-white":!a.campaignId.isDifferent.value}])},null,8,["modelValue","onKeyup","class"]),createVNode(u,{variant:"outlined",disabled:!a.campaignId.isDifferent.value,onClick:a.campaignId.click,color:"secondary",class:"py-5"},{default:withCtx((()=>[_hoisted_25])),_:1},8,["disabled","onClick"])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_26,[createVNode(v,{"hide-details":"true",density:"comfortable",label:"Current Money",variant:"outlined",style:{color:"white","min-width":"140px"},modelValue:a.money.inputVal.value,"onUpdate:modelValue":t[12]||(t[12]=e=>a.money.inputVal.value=e),onKeyup:a.money.keyUp,class:normalizeClass(["mr-2 mb-0",{"text-secondary":a.money.isDifferent.value,"text-white":!a.money.isDifferent.value}])},null,8,["modelValue","onKeyup","class"]),createVNode(u,{variant:"outlined",disabled:!a.money.isDifferent.value,onClick:a.money.click,color:"secondary",class:"py-5"},{default:withCtx((()=>[_hoisted_27])),_:1},8,["disabled","onClick"])])])),_:1})])),_:1})}_sfc_main$3.render=_sfc_render$3,_sfc_main$3.__scopeId="data-v-44dc79d7",installAssets(_sfc_main$3,"components",{VCardTitle:VCardTitle,VCardHeader:VCardHeader,VSpacer:VSpacer,VIcon:VIcon,VCardText:VCardText,VBtn:VBtn,VCardActions:VCardActions,VCard:VCard,VDialog:VDialog,VTooltip:VTooltip,VDivider:VDivider,VTextField:VTextField,VSheet:VSheet});var OwnedSubList_vue_vue_type_style_index_0_scoped_true_lang="\n.iconButton[data-v-229e762d] {\n  cursor: pointer;\n}\n.selectedSub[data-v-229e762d] {\n  margin-top: 5px;\n  margin-right: 5px;\n  cursor: pointer;\n}\n";const _sfc_main$2={computed:{ownedSubList(){var e;return null==(e=this.$store.state.gamesession.elements)?void 0:e[0].elements.find((e=>"ownedsubmarines"==e.name)).elements},selectedSub(){return this.$store.state.gamesession.elements[0].attributes.submarine}},methods:{test(e){console.log(e)},deleteSub(e){let t=this.$store.state.subfiles,o=Object.keys(t).find((o=>t[o].elements[0].attributes.name===e));if(!o)return console.error(`Failed to delete ${e} - not found in attached .sub files`);delete t[o];let a=this.ownedSubList.findIndex((t=>t.attributes.name===e));if(-1===a)return this.$store.dispatch("showAlert",{type:"error",text:`Failed to delete ${e} - not found in ownedSubmarines.`}),console.error(`Failed to delete ${e} - not found in ownedSubmarines`);this.ownedSubList.splice(a,1),this.$store.dispatch("showAlert",{type:"success",text:`Removed "${e}" from the owned submarines and "${o}" file from the savefile.`})},downloadSub(e){let t=this.$store.state.subfiles,o=Object.keys(t).find((o=>t[o].elements[0].attributes.name===e));if(!o)return console.error(`Failed to download ${e} - not found in attached .sub files`);let a=CompressSub(desanitized_js2xml(t[o])),n=document.createElement("a");n.href=URL.createObjectURL(new Blob([a.buffer],{type:"application/gzip"})),n.download=o,n.click()},editSub(e){let t=this.$store.state.subfiles,o=Object.keys(t).find((o=>t[o].elements[0].attributes.name===e));if(!o)return console.error(`Failed to move ${e} to editor - not found in attached .sub files`);this.$store.dispatch("subUploaded",{name:o+".raw",data:JSON.parse(JSON.stringify(t[o]))}),this.$router.push("/SubTools")},selectSub(e){this.$store.state.gamesession.elements[0].attributes.submarine=e,this.$store.dispatch("showAlert",{type:"success",text:`Set current submarine to ${e}.`})}}},_hoisted_1$1=createTextVNode(" Owned Submarines "),_hoisted_2$1=["checked","onClick"],_hoisted_3$1={class:"subname"},_hoisted_4$1=createTextVNode(" mdi-file-download-outline "),_hoisted_5$1=createTextVNode(" mdi-clipboard-arrow-right-outline "),_hoisted_6$1=createTextVNode(" mdi-delete-outline ");function _sfc_render$2(e,t,o,a,n,r){const l=resolveComponent("v-card-title"),i=resolveComponent("v-card-header"),s=resolveComponent("v-spacer"),c=resolveComponent("v-icon"),d=resolveComponent("v-sheet"),u=resolveComponent("v-card");return openBlock(),createBlock(u,{elevation:"1",class:"pb-2"},{default:withCtx((()=>[createVNode(i,{class:"flex-column align-center"},{default:withCtx((()=>[createVNode(l,null,{default:withCtx((()=>[_hoisted_1$1])),_:1})])),_:1}),createVNode(d,{class:"mb-2"},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.ownedSubList.map((e=>e.attributes.name)),(e=>(openBlock(),createBlock(d,{key:e,class:"d-flex flex-row justify-center px-4"},{default:withCtx((()=>[createBaseVNode("input",{title:"Set as currently used",class:"selectedSub",type:"radio",name:"selectedOwnedSub",checked:r.selectedSub===e,onClick:t=>r.selectSub(e)},null,8,_hoisted_2$1),createBaseVNode("div",_hoisted_3$1,toDisplayString(e),1),createVNode(s),createVNode(c,{title:"Download submarine file",color:"secondary",class:"iconButton",onClick:t=>r.downloadSub(e)},{default:withCtx((()=>[_hoisted_4$1])),_:2},1032,["onClick"]),createVNode(c,{title:"Edit submarine",color:"secondary",class:"iconButton",onClick:t=>r.editSub(e)},{default:withCtx((()=>[_hoisted_5$1])),_:2},1032,["onClick"]),createVNode(c,{title:"Delete submarine",color:"red",class:"iconButton",onClick:t=>r.deleteSub(e)},{default:withCtx((()=>[_hoisted_6$1])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})}_sfc_main$2.render=_sfc_render$2,_sfc_main$2.__scopeId="data-v-229e762d",installAssets(_sfc_main$2,"components",{VCardTitle:VCardTitle,VCardHeader:VCardHeader,VSpacer:VSpacer,VIcon:VIcon,VSheet:VSheet,VCard:VCard});const _sfc_main$1={props:{blockDownload:Boolean},computed:{filename(){return this.$store.state.savefileName||"none"},modificationDate(){var e,t,o;let a=null==(o=null==(t=null==(e=this.$store.state.gamesession.elements)?void 0:e[0])?void 0:t.attributes)?void 0:o.savetime;return a?new Date(1e3*parseInt(a)).toLocaleString():"-"}},methods:{download(){var e={};e["gamesession.xml"]=gsHeader+desanitized_js2xml(this.$store.state.gamesession);for(let[a,n]of Object.entries(this.$store.state.subfiles))e[a]=CompressSub(desanitized_js2xml(n));var t=CompressSave(e),o=document.createElement("a");o.href=URL.createObjectURL(new Blob([t.buffer],{type:"application/gzip"})),o.download=this.$store.state.savefileName,o.click()}}},_hoisted_1=createTextVNode(" Download "),_hoisted_2={class:"float-right ma-1"},_hoisted_3=createTextVNode(" Loaded file: "),_hoisted_4={class:"text-primary"},_hoisted_5=createTextVNode(" , Save date: "),_hoisted_6={class:"text-primary"};function _sfc_render$1(e,t,o,a,n,r){const l=resolveComponent("v-btn"),i=resolveComponent("v-card"),s=resolveComponent("v-col");return openBlock(),createBlock(s,null,{default:withCtx((()=>[createVNode(i,{elevation:"1",class:"pr-2"},{default:withCtx((()=>[createVNode(l,{color:o.blockDownload?"surface":"secondary",disabled:o.blockDownload,onClick:r.download},{default:withCtx((()=>[_hoisted_1])),_:1},8,["color","disabled","onClick"]),createBaseVNode("div",_hoisted_2,[_hoisted_3,createBaseVNode("span",_hoisted_4,toDisplayString(r.filename),1),_hoisted_5,createBaseVNode("span",_hoisted_6,toDisplayString(r.modificationDate),1)])])),_:1})])),_:1})}_sfc_main$1.render=_sfc_render$1,installAssets(_sfc_main$1,"components",{VBtn:VBtn,VCard:VCard,VCol:VCol});const _sfc_main={name:"SaveTools",components:{CampaignSettings:_sfc_main$5,CrewList:_sfc_main$4,FileDropper:_sfc_main$6,MiscSaveTools:_sfc_main$3,OwnedSubList:_sfc_main$2,SaveDataBar:_sfc_main$1},computed:__spreadValues({},mapGetters(["saveLoaded"]))};function _sfc_render(e,t,o,a,n,r){const l=resolveComponent("FileDropper"),i=resolveComponent("v-col"),s=resolveComponent("v-row"),c=resolveComponent("SaveDataBar"),d=resolveComponent("OwnedSubList"),u=resolveComponent("CampaignSettings"),h=resolveComponent("CrewList"),p=resolveComponent("MiscSaveTools"),f=resolveComponent("v-container");return openBlock(),createBlock(f,null,{default:withCtx((()=>[createVNode(s,null,{default:withCtx((()=>[createVNode(i,null,{default:withCtx((()=>[createVNode(l)])),_:1})])),_:1}),createVNode(s,null,{default:withCtx((()=>[createVNode(c,{blockDownload:!e.saveLoaded},null,8,["blockDownload"])])),_:1}),e.saveLoaded?(openBlock(),createBlock(s,{key:0},{default:withCtx((()=>[createVNode(i,null,{default:withCtx((()=>[createVNode(d)])),_:1}),createVNode(i,null,{default:withCtx((()=>[createVNode(u)])),_:1}),createVNode(i,null,{default:withCtx((()=>[createVNode(h)])),_:1}),createVNode(i,null,{default:withCtx((()=>[createVNode(p)])),_:1})])),_:1})):createCommentVNode("",!0)])),_:1})}_sfc_main.render=_sfc_render,installAssets(_sfc_main,"components",{VCol:VCol,VRow:VRow,VContainer:VContainer});export{_sfc_main as default};
